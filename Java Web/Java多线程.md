# Java多线程

标签（空格分隔）： JavaEE

---

> 参考： 《Java面向对象编程》、《Java语言程序设计.进阶篇》、《Java多线程编程核心技术》  
>
> 结合Java虚拟机一起学习，来了解在Java虚拟机管理的内存包括以下几个运行时数据区中，哪些是数据区是线程私有，哪些是线程共享。


**进程**:是值运行中的应用程序，每个进程都有自己独立的内存空间；一个应用程序可以同时启动多个进程。比如同时打开两个IE。

**线程**:指进程中的一个执行流程，有时也称执行情景。

每个线程都有一个**独立的程序计数器和方法调用栈**





## 使用场景





1. 使得下面的IO操作不会继续阻塞当前main方法所在线程（以前并没有注意到这一点）
2. 同时可以并发的处理多个任务







## 线程的创建和启动



创建线程有两种方式：



- 扩展java.lang.Thread类
- 实现Runnable**接口**



Thread类的两个主要方法：  

- run() ：包含线程运行时所执行的代码（不会抛出异常）
- start()：用于启动线程

用户的线程类只需继承Thread类，覆盖run()方法即可，且不能抛出异常，因为父类中的该方法没有抛出异常。



Thread类的`run()`方法时专门被自身的线程执行的，虽然它时public的，但是我们在主线程中直接调用`run()`方法有违设计初衷。





## 线程的运行过程



1. 主线程与用户自定义的线程并发运行
2. 多个线程共享同一个对象的实例变量
3. 不要随便覆盖Thread类的`start()`方法
4. 一个线程只能被启动一次



## 实现Runnable接口



Java不允许一个类继承多个类，因此一旦一个类继承了Thread类，就不能再继承其他类。这是一个很严重的问题。



为了解决该问题，就有了 Runnable 接口，它有一个run()方法。



在Thread类中定义了如下构造方法：

```java
Thread(Runnable runnable)  //当线程启动时，将执行参数runnable所引用对象的run()方法
```



Runnable接口的用法：

```java
public class Machine implements Runnable{
  //。。。
  
  @Override
  public void run(){
    
  }
  
  public static void main(String args[]){
    Machine machine = new Machine();
    Thread t1 = new Thread(machine);
    t1.start;
  }
}


```



## 线程的状态转换



## 线程调度



## 获得对当前线程对象的引用



Thread类的currentThead()静态方法，返回当前线程对象的引用。



## 后台线程



即守护线程，用于为其他线程提供服务。



后台线程的特点：



后台线程与前台线程相伴相随，只有所有前台线程都结束生命周期，后台线程才会结束生命周期。只要有一个前台线程没有结束运行，后台线程就不会结束生命周期。



主线程在默认情况是前台线程，由前台线程创建的线程默认情况下也是前台线程。



调用setDaemon(true)方法，能把一个线程设置为后台线程。



使用后台线程的注意点：

- -
- -
- -



## 定时器 Timer







## 线程的同步





## 线程通信





---



...



