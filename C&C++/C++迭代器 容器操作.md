迭代器、容器操作
===============

[toc]


















|  运算     |     说明         |
|------------|-----------------|


> il : 列表，花括号包围的元素列表。      
>
>arg : 参数。 



迭代器
-------




###表3.6：标准容器迭代器的运算符 (p96)

|    操作              |  描述               |
|----------------------|--------------------|
| *iter					| 返回迭代器 iter 所指元素的引用 |
|iter->men			|解引用iter并获取该元素的名为 men 的成员，等价于 (*iter).men |
|++iter					|令 iter 指示容器中的下一个元素 |
|`--`iter					|令 iter 指示容器中的上一个元素 |
|iter1 == iter2		|判断两个迭代器是否相等             |
|iter1 != iter2		|  |


###表3.7 : vector和 string 迭代器支持的运算(p99)

| 运算	| 说明			|
|---------|-------------|
|iter + n |    n为整数    |
|iter - n |        |
|iter += n |       |
|iter -= n |    |
|iter1 - iter2 | 两个迭代器之间的距离 (注意没有定义相关+) |
| ` >   >=   <  <= ` | 迭代器的关系运算符 |







容器
-----------

###表9.1: 顺序容器类型

|  运算     |     说明         |
|------------|-----------------|
|vector		| 可变大小数组		|
|deque		| 双端队列 |
|list		| 双向链表 |
|forward_list | 单向链表 |
|array		| 固定大小数组 |
|string		| |








###表9.2: 容器操作  


|  运算     |     说明         |
|------------|-----------------|
|| |
|**类型别名 **| |
|iterator |	此容器类型的迭代器类型  |
|const_iterator | 只读迭代器类型 |
|size_type		|无符号整数类型，保存此容器的容器大小 |
|difference_type |	带符号整数类型，保存两个迭代器之间的距离 |
|value_type		| 元素类型  |
|reference		| 元素的左值类型，与 value_type& 含义相同	|
|const_reference | 元素的const左值类型 |
| | |
|**构造函数 ** | |
|C  c;			| 默认构造函数,构造空容器 |
|C c1(c2)		| 构造 c2 的拷贝 c1		|
|C c(b, e)		| 构造 c ，将迭代器b和e指定的范围内的元素拷贝到c (array不支持) |
|C c(a, b, c...) | 列表初始化c |
| | |
|**赋值与 swap** | |
|c1 = c2		| 将 c1 中的元素替换为 c2 中的元素 |
|c1 = {a,b,c...} 		| 将c1中的元素替换为列表中的元素  (array不支持)|
|a.swap(b)		| 交换a和b的元素  |
|swap(a,b)		| 与a.swap(b)等价，非成员函数版 |
| | |
|  **大小**	| |
|c.size()	| c中元素的数目( 不支持 forward_list ) |
|c.max_size() | c 可保存的最大元素数目 |
|c.empty()		|   |
| ||
|**添加/删除元素** (不适用于 array ) ||
|c.insert(args) |	将args中的元素拷贝进 c |
|c.emplace(inits) | 使用inits构造c中的一个元素 |
|c.erase(args)		| 删除args指定的元素 |
|c.clear()			|删除c中的所有元素，返回void |
|关系运算符 | |
| `==  != ` | 所有容器都支持 |
| `<  <=  >    >= `| 无序关联容器不支持 |
| | |
|**获取迭代器** | |
|c.begin(), c.end()	| 返回指向c的首元素和尾元素之后的位置的迭代器|
|c.cbegin(), c.cend() | 返回 const_iterator |
|  |  |
|**反向容器的额外成员**(不支持forward_list) | |
|reverse_iterator	| 按逆序寻址元素的迭代器 |
|const_reverse_iterator |不能修改元素的逆序迭代器 |
|c.rbegin(), c.rend()	| 返回指向c的尾元素和 * 首元素之前* 位置的迭代器 |
|c.crbegin(), c.crend() |  |














###表9.3 ：容器定义和初始化  


|  运算     |     说明         |
|------------|-----------------|
|C c;			| 默认构造函数，如果C是array，则c中元素按默认方式初始化；否则c为空 |
|||
|C c1(c2)  		| |
|C c1=c2 | |
|||
|C c{a, b, c...} | |
|C c={a, b, c...} | |
|||
|C c(b,e) |     c初始化为 迭代器 b 和 e 指定范围中的元素的拷贝。|
|||
||只有顺序容器(不包括array)的构造函数才能接受大小参数|
| C seq(n)		| seq 包含 n 个元素，这些元素进行了值初始化；此构造函数是explicit的。（string 不适用) |
|C seq(n, t)		| seq 包含 n 个初始化为 t 的元素 |
|5种构造方法||




###表9.4 : 容器赋值运算  


|  运算     |     说明         |
|------------|-----------------|
|c1 = c2		| 将c1中的元素替换为 c2中元素的拷贝 , c1 和 c2类型须相同|
|c={a, b, c...} | (array不适用) |
|swap(c1, c2) | 交换c1 和 c2 中的元素。比从c1向c2拷贝元素快 |
|c1.swap(c2)	|  |
| ||
||assign操作不适用于关联容器和array |
|seq.assign(b, e)	|将seq中的元素替换为迭代器b和e的范围中的元素(b和e不能指向seq中) |
|seq.assign(il) | 将seq中的元素替换为初始化列表il中的元素 |
|seq.assign(n, t) | 将seq中的元素替换为n个值为t的元素 |

> **赋值相关运算会导致指向左边容器内部的迭代器、引用和指针失效。而swap操作将容器内容交换不会导致其失效(array和string除外)** 








******************************************

 
###顺序容器


###表9.5：向顺序容器添加元素的操作

| 操作            |  说明              |
|------------------|--------------------|
|c.push_back(t)  | 在c的尾部创建一个值为t或args创建的元素，返回viod |
|c.emplace_back(args) | |
|c.push_front(t)	| 在c的头部创建一个值为t或args创建的元素，返回void |
|c.emplace_front(args) | |
|c.insert(p, t)		| 在迭代器p指向的元素之前插入n个值为t或由args创建的元素。返回指向新添加的元素的迭代器 |
|c.emplace(p, args) | |
|c.insert(p, n, t)  | 在迭代器p指向的元素之前插入n个值为t的元素。返回指向新添加的第一个元素的迭代器；若n为0,则返回p |
|c.insert(p, b, e)  | 将迭代器b和e指定的范围内的元素插入到迭代器p指向的元素之前。b和e不能指向c中的元素。返回指向
新添加的第一个元素的迭代器；若范围为空，则返回p |
|c.insert(p, il)	| il是一个花括号包围的元素值列表。将这些给定值插入到迭代器p指向的元素之前，返回值类似上|

>这些操作会改变容器大小；array不支持这些操作。   
>forward_list有自己专有版本的insert和emplace。     
>forward_list不支持push_back和emplace_back 。
>vector和string不支持push_front和emplace_front 。     
>向一个vector、string或deque插入元素会使所有指向容器的迭代器、引用和指针失效。    








###表9.6:在顺序容器中访问元素的操作 

|  操作		| 说明						|
|-----------|----------------------------|
|c.back()	| 返回c中尾元素的引用。若c为空，函数行为未定义 |
|c.front()	| 返回c中首元素的引用。若c为空，函数行为未定义 |
|c[n]		| 返回c中下标为n的元素的引用，n是一个无符号的整数。若n>=c.size(),则函数行为未定义 |
|c.at(n)	| 返回下标为n的元素的引用。如果下标越界，则抛出out_of_range异常 |

>at和下标操作只适用于string、vector、deque和array。     
>back不适用于forward_list   








###表9.7:顺序容器的删除操作  

|  操作		|  说明					|
|-----------|-----------------------|
|c.pop_back()	| 删除c中尾元素。若c为空，则函数行为未定义。函数返回void |
|c.pop_front()	| 删除c中首元素。若c为空，则函数行为未定义。函数返回void |
|c.erase(p)		| 删除迭代器p所指定的元素，返回被删除元素之后元素的迭代器，若p是尾后迭代器，则函数行为未定义 |
|c.erase(b,e)	| 删除迭代器b和e范围内元素，返回被删除元素之后元素的迭代器，若e为尾后迭代器，也返回尾后迭代器|
|c.clear()		| 删除c中所有的元素。返回void |

>这些操作会改变容器的大小，所以不不适用于array。      
>forward_list有特殊版本的erase				
>forward_list不支持pop_back; vector 和 string 不支持pop_front		
>
>删除deque中除首尾位置之外的任何元素都会使所有迭代器、引用和指针失效。指向vector或string中删除点
之后位置的迭代器、引用和指针都会失效。    
>
>在删除元素之前，程序员必须先确保它们是存在的。  








###表9.8:在forward_list中插入或删除元素的操作		

| 操作			| 说明						|
|---------------|---------------------------|
|lst.before_begin()	| 返回指向链表首元素之前不存在的元素的迭代器。此迭代器不能解引用。|
|lst.cbefore_begin()| |
|lst.insert_after(p, t) | 在迭代器p之后的位置插入元素。t是一个对象， |
|lst.insert_after(p,n,t)|n是数量， |
|lst.insert_after(p,b,e)|b和e是表示范围的一对迭代器（b和e不能指向lst），|
|lst.insert_after(p,il)	|il是一个花括号列表。 返回一个指向最后一个插入元素的第带去。如果范围为空，则返回p。若p为尾后迭代器，则函数行为未定义|
|emplace_after(p, args) |使用args在p指定的位置之后创建一个元素。返回一个指向这个新元素的迭代器。若p为尾后迭代器，则函数行为未定义|
|lst.erase_after(p)		|删除p指向的位置之后的元素，或删除从b之后直到(但不包含)e之间的元素。返回一个指向被删除元素之后元素的迭代器|
|lst.erase_after(b,e)	|若不存在这样的元素，则返回尾后迭代器。如果p指向lst的尾元素或者它是尾后迭代器，则函数行为未定义|
















###表9.9:顺序容器大小操作  


|  运算     |     说明         |
|------------|-----------------|
|c.resize(n)	| 调整c的大小为n个元素。若n < c.size(),则多出的元素被丢弃。若必须添加新的元素，对新元素进行值的初始化 |
|c.resize(n, t)	| 调整c的大小为n个元素。任何新添加的元素都初始化为值t |

>如果resize缩小容器，则指向被删除元素的迭代器、引用和指针都会失效；对
vector、string或deque进行resize可能导致迭代器、指针和引用失效。














###表9.10:容器大小管理操作

|  运算     |     说明         |
|------------|-----------------|
|c.shrink_to_fit()	| 请将capacity()减少为与size()相同大小 |
|c.capacity()		| 容器不扩张内存空间的情况下可以容纳多数元素|
|c.reserve(n)		| 分配至少能容纳n个元素的内存空间|

>只有当需要的内存空间超过当前容量时，reserve调用才会改变vector的容量




**********************************************









string
--------------


###表3.1 ：初始化string对象的方式


|  运算     |     说明         |
|------------|-----------------|
|string s1	| 默认构造，s1是空串 |
|string s2(s1) | s2 是 s1 的副本 |
|string s2 = s1 | |
|string s3("value") | s3是字面值"value" 除末尾的空字符 \0 外的拷贝|
|string s3 = "value" |  |
|string s4(n, 'c')	| 把 s4 构造为由连续 n 个字符c组成的串 |



###表3.2 ：string的操作 (p77)

|  运算     |     说明         |
|------------|-----------------|
|os `<<` s	| 将 s 写到输出流 os 中，返回 os |
|is ` >>` s	| 从 is 中读取字符串赋给 s，**字符串以空格分隔**,返回is |
|getline(is , s) | 从is 中读取一行赋给 s ， 返回is |
|s.empty()	| s 为空返回 ture |
|s.size()	| 返回 s 中字符个数 |
|s[n]		| 返回 s 中第 n 个字符的引用，从0开始 |
|s1 + s2	| 返回连接后的结果 |
|s1 = s2	| 用 s2 的副本代替s1中原来的字符 |
|s1 == s2	| |
|s1 != s2	| |
|`<  <=  >  >= ` | 利用字符在字典中的顺序进行比较 |



###表3.3: cctype头文件中的函数


|  函数     |     说明         |
|------------|-----------------|
|isalnum(c)		| 当c是字母或数字时为真 |
|isalpha(c)		| 当c是字母时为真 |
|iscntrl(c)		| 当c是控制字符时为真 |
|isdigit(c)		| 当c是数字时为真 |
|isgraph(c)		| 当c不是空格但可打印时为真 |
|islower(c)		| 当c是小写字母时为真 |
|isprint(c)		| 当c是可打印字符时为真（即c是空格或c具有可视形式） |
|ispunct(c)		| 当c是标点符号时为真 |
|isspace(c)		| 当c是空白时为真 |
|isupper(c)		| 当c是大写字母时为真 |
|isxdigit(c)	| 当c是十六进制数字时为真 |
|tolower(c)		| 如果c是大写字母，则输出对应小写字母 |
|toupper(c)		| 如果c是小写字母，则输出对应大写字母 |







*******************************************************************

###相比其他容器string额外的操作



###表9.11:构造string的其他方法

|  操作     |     说明         |
|------------|-----------------|
|string s(cp, n)	| s是cp指向的数组中前n个字符的拷贝。此数组应该包含n个字符 |
|string s(s2, pos2)	| s是string s2 从下标pos2 开始的字符的拷贝。若pos > s2.size(),构造函数的行为未定义 |
|string (s2, pos2, len2)	|s是string s2从下标pos2开始len2个字符的拷贝。若pos2 > s2.size(),构造函数的行为未定义。不管len2的值是多少，构造函数至少拷贝 s2.size() - pos2 个字符 |






###表9.12:子字符串操作

|  操作     |     说明         |
|------------|-----------------|
|s.substr(pos, n)	| 返回一个string，包含s中从pos开始的n个字符的拷贝，pos的默认值为0 。 n的默认值为s.size() - pos开始的所有字符|






###表9.13:修改string的操作

|  操作     |     说明         |
|------------|-----------------|
|s.insert(pos, args)	| 在pos之前插入args指定的字符。pos可以是下标(返回一个s的引用)或迭代器(返回指向第一个插入字符的迭代器) |
|s.erase(pos,len)	| 删除从pos开始的len个字符。如果len未给定，则删除pos到s末尾的所有字符。返回一个指向s的引用|
|s.assign(args)		| 将s中的字符替换为args指定的字符。返回一个指向s的引用|
|s.append(args)		| 将args追加到s。返回一个指向s的引用|
|s.replace(range,arge)| 删除s中范围range内的字符，替换为args指定的字符。range或者是一个下标和长度，或者是一对指向s的迭代器。返回一个指向s的引用|
|||
|||
|args可以是下列形式之一： append和assign可以使用所有形式。|str 不能与s相同，迭代器b和e不能指向s。|
|str			| 字符串 str |
|str, pos, len	| str 中从 pos 开始最多 len 个字 |
|cp, len		| 从 cp 指向的字符数组的前(最多)len个字符|
|cp				| cp 指向的以空字符结尾的字符数组|
|n, c			| n 个字符 c |
|b, e			| 迭代器 b 和 e 指定的范围内的字符|
|初始化列表		| 花括号包围的，以逗号分隔的字符列表|
|||
|||
| replace 和 insert 所允许的 args 形式依赖于 |  range 和 pos 是如何指定的 （见书本）|








***********************************************************************************
