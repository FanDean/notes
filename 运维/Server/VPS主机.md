# VPS介绍和选购

> VPS与容器

购买时尽量如实填写信息，否则可能触发账户审核；**作假**不能太假。



## 主机



三种基本的主机类型：

- 虚拟主机（共享）
- 虚拟专用伺服器（VPS）
- 专属伺服器


- 进阶虚拟主机：云端伺服器



购买主机的时候要注意自己的**域名**是不是已经ICP备案，如果没有备案不能选择大陆的主机。建议用香港的，毕竟与日韩美比地理位置相对于大陆较近比。这里演示用的[主机公园](http://www.hostpark.cn/)的香港虚拟主机，如果你的域名备案了可以选择大陆的主机，比如阿里云，腾讯云都可以。

购买域名之后，如果选择国外的服务器提供商，域名只需要设置好DNS解析即可使用，而在国内的服务器提供商上部署，你还需要进行域名备案 。

我曾经有个疑问：如果我将静态网站托管在github pages上，并且用自己的域名是否需要备案？

**注意**：这里需要备案的是域名，而非主机；在国外服务商购买域名时该域名无需备案，但你想使用该未备案的域名购买国内主机是不允许的（不知是否有其他方式）



> [从零开始的VPS生活 Vol0：如何花掉你的钱 - 菜鸟小熊](https://www.noobear.com/linux/days_with_vps_vol0/)
>
> 购买主机的需求，示例：
>
> - **学习？** 本机上开一个虚拟机可以满足大部分的需求。
> - **科学上网？** 网上卖的科学上网账号价格更低一些（当然，不是很安全也是一个问题）。
> - **搭建博客？** github page + hexo/jekyll/hugo + gitalk/gitment即可无成本搭建。
>
> 
>
> - **我想有一个7x24在线的机器，帮我每天抓取更新的博文/小说/小姐姐照片。**
> - **我想搭建个人网盘，随时随地访问我的文件。**
> - **我想做个APP，需要接口能够外网访问。**（用于fq）
> - **（更加个性化的需求）**
>
> 
>
> **选择VPS提供商：**
>
> - **需要科学上网么？** 是 —— 必选海外VPS。
> - **需要实惠的价格？** 是 —— 阿里云、腾讯云等双十一有优惠，价格低；如果是学生还有更多优惠。
> - **需要高速/大量上传下载么？** 是 —— 海外VPS的流量，带宽比较便宜。
> - **需要低延迟？** 是 —— 物理距离和较小的海外出口是无法用优化解决的问题，必选国内VPS。
>
> 
>
> 这里以我选择的服务商Vultr为例，说说影响使用体验的一些细节：
>
> - 付款支持paypal+银联卡，支付宝，**门槛低**。（不过莫名不支持我的VISA全币卡…）
> - 按小时计费，实时创建、删除，**试错成本低**。
> - 不支持直接更换主IP，被墙后的**恢复成本高**。（个人补充：下文有说到，搬瓦工可以无损换机房；vultr可以换机房换IP，**但**是系统要重新安装。其他服务商很少有能换机房换IP的。但该项服务可能会变）
> - 支持**免费**的全盘Snapshot备份，间接实现换主IP。
> - 有3.5刀的超**廉价**选项。
> - 响应ticket的速度很快，**客服相对可靠**。
> - 因为以上原因，天朝科学上网用户极多，**较容易被ban**。
>
> 
>
>  关于海外VPS选择哪个国家的机房，建议直接多创建几台机器测试，哪个快用哪个。更多细节可以用[besttrace](https://www.ipip.net/download.html#ip_trace)，看一下所选的VPS到你的电脑是否直连。（比如广东移动的IP到我的日本服务器就要绕香港，联通和电信就是直连）。 
>
>  在选购的时候，看到**OpenVZ**这个字眼，尽可能的避而远之（比如著名的bandwagonhost/搬瓦工）…这种虚拟化方式虚拟的不彻底（不过好歹是比docker强的），没法随便换内核导致一些调优的方案无法使用，而且通常超售很严重，会影响连接速度。 



我的需求：

- 个人博客访问速度尽量快，不能拖后腿
- 能够提供fq服务
- 国外主机需要能够支持（免费）IP更换。才能不被墙。
- 让自己的网站能够回本

那么我的主机和域名应该在哪些服务商购买？

几种方案拿出来探讨：

- 域名国外、主机国外。难题如何找到合适的服务商（能够解决支付问题和blog访问速度问题IP屏蔽问题）

- 假设博客的域名主机都在国内，另购一个国外的用于fq的主机

- 域名主机都在国外购买，博客托管在Github Pages上（进行域名绑定）。

  

[支持免费换IP的国外VPS推荐-VEIDC评测](https://www.veidc.com/vps/4510.html)

 国外VPS封得厉害或是各种原因需要更换ip，但是很多国外VPS主机商IP更换都是需要费用的 

如果只是想fq，可以考虑 [Just My Socks](https://justmysocks1.net/members/cart.php?gid=1) ，它是搬瓦工推出的shadows0cks代理，提供5个IP，被墙后自动更换。



## VPS介绍

虚拟专用服务器（英语：Virtual private server，缩写为 VPS），是将一台服务器分区成多个虚拟专享服务器的服务。实现VPS的技术分为容器技术和虚拟化技术 。在容器或虚拟机中，每个VPS都可分配独立公网IP地址、独立操作系统、实现不同VPS间磁盘空间、内存、CPU资源、进程和系统配置的隔离，为用户和应用程序模拟出“独占”使用计算资源的体验。VPS可以像独立服务器一样，重装操作系统，安装程序，单独重启服务器。

不同VPS提供商所使用的硬件VPS软件的差异，及销售策略的不同，VPS的使用体验也有较大差异。尤其是VPS提供商超卖，导致实体服务器超负荷时，VPS性能将受到极大影响。 **相对来说，容器技术比虚拟机技术硬件使用效率更高**，更易于超卖，所以一般来说容器VPS的价格都高于虚拟机VPS的价格。 这些VPS主机以最大化的效率共享硬件、软件许可证以及管理资源。每个VPS主机都可分配独立公网IP地址、独立操作系统、独立超大空间、独立内存、独立CPU资源、独立执行程序和独立系统配置等. VPS主机用户除了可以分配多个虚拟主机及无限企业邮箱外， 更具有独立主机功能, 可自行安装程序，单独重启主机。



目前用得最多的虚拟化技术是Xen, OpenVZ, Hyper-V, vmware。


超售情况: 假设宿主机有16G内存，但开出20台1G内存的vps，都卖出去了；而这20台vps里都显示1G内存，这就是超售。事实上OpenVZ通常超售得更厉害！

OpenVZ:  不建议买，搬瓦工已经全面下架此产品

Xen： 

KVM:  

详见：[百度百科.VPS](http://baike.baidu.com/item/VPS)  




### 知乎上的几个相关问题

1.  [云服务器（ECS）云主机 云虚拟主机 VPS等产品的区别?](https://www.zhihu.com/question/46387307/answer/134871803)  
    第一、云主机和普通主机基本概念相同，是新一代的主机租用服务，它整合了高性能服务器与优质网络带宽，有效解决了传统主机租用价格偏高、服务品质残次不齐的缺点，与VPS相比更稳定、更安全；第二，VPS是虚拟服务器（服务器是真实存在的物理设备），功能与服务器一样，有独立的操作系统，可以理解为是一个小电脑。不同点在于它是虚拟的，在同等配置的情况下性能不如服务器。
    第二，虚拟主机是服务器划分的一块存储空间，功能有限，只能进行资源的存储和访问
2.  [VPS 与虚拟主机有什么异同？](https://www.zhihu.com/question/19856629)  



## VPS帐户被封问题
[Vultr vps账户可能会出现被锁定的原因以及解决方法](http://www.vpspp.com/240.html)  
[Vultr账户被封的原因以及解决方法](https://www.vultrclub.com/76.html)  
[新用户购买和使用Vultr VPS需要知道的8个问题](http://www.chinaz.com/web/2015/1214/483003.shtml)  

Vultr帐户限制：如果被发现我们是多注册或者恶意注册且关联多个相关信息，那只要相关联的账户都会被封的风险。不要利用VPS主机从事群发邮件或者发包业务。




总结，无论是何种原因导致的被封账户，我们需要找到原因以及是不是自己的行为，如果不是我们的问题，我们需要解释清楚，最好不要不了了之，因为海外VPS服务器商家之间有一个账户信息库，如果我们进入黑名单，以后再购买机器是不好付款或者永远都无法购买成功的



## VPS选购

料网的几篇

[Linode 2017新价格方案：5美金来袭！ -  料网](https://www.liaosam.com/linode-2017-new-plan.html)

Vultr 的 5美金方案内存太小了，才768M。通常我们使用 VPS，跑 php 程序部分会考虑分配1/4左右的总内存，剩余的 3/4 的内存要留给 linux系统，数据库以及其他各种程序。而现在WordPress好的主题越来越吃内存，如 Avada 等等，内存至少要有个128M，最好是 256M，所以有个1G的内存，WP建站才安逸一些。（注意：Linode的1G也是理论值，实际差不多990M，不足1024M）

相同 5美金/月的价格，Linode 高品质机房和口碑，1G 内存，而 vultr 768MB 内存。





[老左常用国内/国外VPS推荐](http://www.laozuo.org/myvps)  

[有哪些便宜稳定，速度也不错的Linux VPS 推荐？](https://www.zhihu.com/question/20800554)  

[10美元以下VPS](https://www.vpser.net/ten-dollars-vps)  



### BandwagonHOST

 **只能付费更换 IP** 、支持支付宝、微信付款。

 搬瓦工已经全面下架了OpenVZ架构方案，目前在售方案只有KVM架构 。



> [bandwagonhost.com](https://www.vultrblog.com/go/bandwagonhost-com/)（主站：已河蟹）
>
> [bwh1.net](https://www.vultrblog.com/go/bwh1/)（镜像：已河蟹）
>
> [bwh8.net](https://www.vultrblog.com/go/bwg/)（镜像：正常）



[Bandwagonhost非官方中文网站](https://www.bandwagonhost.net/)

[BandwagonHost_搬瓦工主机网——BwgHost.net](https://bwghost.net/)

[老左：搬瓦工VPS（BandwagonHost）](http://www.laozuo.org/bandwagonhost)  

[BandwagonHOST产品和服务列表](https://bwh1.net/cart.php?gid=1)  

2018年双十一有巨大优惠，不知道，当时我正在买阿里云主机？头大了。现在的优惠没有多大了。



当前2019.11建议看这篇文章： [搬瓦工新手入门完全指南：方案推荐、机房选择、优惠码和购买教程-Bandwagonhost中文网](https://www.bandwagonhost.net/4518.html)



BandwagonHOST（搬瓦工），可选择16年上架的弗里蒙特机房的512M内存19.99刀包年的VPS，只有该一个机房，且该机房从国内访问延迟比其他的几个机房要大；
另有256M内存的8机房套餐。

BandwagonHOST优惠码：IAMSMART5TDT48(目前优惠力度最大的5.08%)优惠码， 4.82%优惠码IAMSMART5GRNII 。


不能换机房的板瓦工就没什么乐趣了。板瓦工可以无损换机房；vultr可以换机房换IP，**但**是系统要重新安装。其他服务商很少有能换机房换IP的。



> [Just My Socks](https://justmysocks1.net/members/cart.php?gid=1)  它是搬瓦工推出的shadows0cks代理，提供5个IP，被墙后自动更换。价格表
>
> Just My Socks 100 
>
> $2.88/mo
> 100GB/mo at 1 Gbps | 3 devices
>
> Just My Socks 500
> $5.88/mo
> 500GB/mo on 2.5 Gbps | 5 devices
>
> Just My Socks 1000
> $9.88/mo
> 1TB/mo at 5 Gbps | ∞ devices



### Vultr
最低2.5美元一月，512M内存。

[Vultr | Vultr中文网,Vultr VPS,Vultr优惠码,Vultr评测,Vultr购买](https://www.vultrblog.com/) 

选择Vultr的理由：

①、全球拥有15个数据中心，自由切换机房。
②、所有VPS均采用KVM架构、SSD固态硬盘。
③、自定义ISO系统，Win系统更为用户喜爱。
④、采用计时消费模式，让选择更加灵活。
⑤、免费快照备份，让数据更为安全。
⑥、众多一件脚本，可以快速搭建各种环境。
⑦、优惠不间断，新老用户5-100美金任意送。
⑧、支付宝付款，让您购买更为轻松。
⑨、服务器稳定，大公司不怕跑路。
⑩、售后无忧，客服可帮助解决各类问题。 



Vultr 是按照计时方式进行扣费的，在当前使用时长不足一小时的情况下会按照一小时进行扣费。如果在不使用的时候可以停止 VPS，即：服务销毁（Destroy），这样可以及时停止扣费。也就是说大家使用了多长的时间就会扣除多久的费用。

举个例子：按照 5美元/月的套餐来算，那么使用一小时所扣除的费用大约为 $0.007/h。

关于机房的选择，建议大家进入 [Vultr 所有数据中心 IP 测试地址](http://www.vultrblog.com/index.php/ip/)页面进行速度测试，选择相对延迟比较低的机房。

（建议机房选择，日本机房距离国内比较近，速度相对于来说比较快，但是用的人也多，晚上可能回抽疯，本站测试目前洛杉矶机房从整体上看要优于日本机房，具体的速度还需要大家以自行测试后的效果为准。）



### Hostwinds

[VEIDC测评-国外VPS，国外服务器，国外主机，测评及优惠码](https://www.veidc.com/)

主机行业里面的后起之秀，成立于2010年；Hostwinds是一家良心的主机公司，服务做得真的是无可挑剔！hostwinds目前运作着美国西海岸的西雅图、达拉斯和荷兰的阿姆斯特丹三个数据中心

支持支付宝



西雅图测试IP：104.168.168.16

达拉斯测试IP：108.174.193.107

阿姆斯特丹测试IP：193.188.25.11



### I/O Zoom

免费换IP、支持支付宝



### Hostigation

Hostigation，Hostigation又新发布了几款促销，其中256M内存内存的KVM年付只需要12.5美金，机房位于QuadraNet的洛杉矶机房。到国内速度不错。还提供免费的DDoS保护。可以支付宝付款。



VPS 磁盘：有的是大容量的HDD硬盘，有的是相对较小的SSD固态硬盘。




### DeployNode
[高性价比VPS再现 - DeployNode](https://blog.phpgao.com/deploynode.html)  



### 几个便宜的VPS服务器

可以买来自建SS、V2Ray翻墙



**Virmach**这家被称为价格屠夫不是白叫的，最近支持支付宝支付了，列举几个他家便宜套餐折扣后的价格。

KVM VPS配置 SSD128（KVM类型的VPS性能好比较推荐，注册不要使用代理，信心也不要乱填）        
内存 128MB        
硬盘 10GB        
流量 500GB       
核心 1       
IP 1       
**购买** [年付 8.75 刀](https://billing.virmach.com/aff.php?aff=2798&pid=59) 使用LEB30七折优惠码       

OpenVZ配置       
内存 128MB       
硬盘 10GB      
流量 250GB      
核心 1H1GIP 1      
**购买** [年付 5.25 刀](https://billing.virmach.com/aff.php?aff=2798&pid=35) 使用LEB30七折优惠码        

测速选择速度快的美国西部机房https://billing.virmach.com/knowledgebase.php?action=displayarticle&id=11








## 支付问题
Vultr上用绑定银联的paypal支付，出现说我的付款方式被拒绝。可能只能使用绑定信用卡的PayPal才能支付成功。

中国版的PayPal有些国外网站不支持。

见Pocket上收藏夹的几篇VPS和PayPal的文章。






## VPS安全问题



## 优化

大家都知道国外的服务器远离大陆，在国内连接速度并不是很好，尤其是在晚高峰期体验效果明显有所下降，此时我们需要安装一些脚本进行加速。前段时间 Google 开源了 TCP BBR 拥塞控制算法，根据用户使用体验的效果来看在 VPS 上开启了 TCP BBR 后网速最高可达到10几倍的提升。 

[Google BBR加速教程：一键安装原版 Google BBR 拥塞控制算法 | Vultr](https://www.vultrblog.com/google-bbr/.html)





## 用VPS来干的事

[从零开始的VPS生活系列 - 菜鸟小熊](https://www.noobear.com/linux/)

